<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小惊喜</title>
    <!-- 引入外部资源 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#8A2BE2', // 主色调：紫罗兰色
                        accent: '#FF69B4',  // 强调色：粉色
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .btn-pulse {
                animation: pulse 2s infinite;
            }
            @keyframes pulse {
                0% { transform: scale(1); }
                50% { transform: scale(1.05); }
                100% { transform: scale(1); }
            }
        }
    </style>
</head>
<body class="font-inter bg-gradient-to-br from-purple-100 to-blue-100 min-h-screen flex items-center justify-center p-4 transition-all duration-1000">
    <!-- 初始界面 -->
    <div id="initial-screen" class="text-center max-w-md">
        <div class="mb-8 text-purple-600">
            <i class="fa fa-gift text-6xl animate-bounce"></i>
        </div>
        <h1 class="text-[clamp(1.8rem,5vw,2.5rem)] font-bold text-gray-800 mb-4 text-shadow">
            准备好迎接惊喜了吗？
        </h1>
        <p class="text-gray-600 mb-8 text-lg">
            点击下方按钮，开启属于你的小美好
        </p>
        <button id="surprise-btn" class="btn-pulse bg-accent hover:bg-pink-500 text-white font-semibold py-3 px-8 rounded-full shadow-lg transform transition-all hover:scale-105 focus:outline-none focus:ring-2 focus:ring-pink-300">
            开启惊喜 <i class="fa fa-arrow-right ml-2"></i>
        </button>
    </div>

    <!-- 惊喜界面 (初始隐藏) -->
    <div id="surprise-screen" class="fixed inset-0 flex items-center justify-center bg-black/90 z-50 hidden">
        <canvas id="fireworks" class="absolute inset-0 w-full h-full"></canvas>
        <div class="text-center text-white z-10 px-4">
            <h2 class="text-[clamp(1.5rem,4vw,2.2rem)] font-bold mb-4">🎉 给你的小惊喜！</h2>
            <p class="text-[clamp(1rem,3vw,1.5rem)] mb-6 max-w-lg mx-auto">
                愿你每天都像这烟花一样，绚烂夺目，充满喜悦
            </p>
            <button id="reset-btn" class="bg-white/20 backdrop-blur-sm hover:bg-white/30 text-white font-medium py-2 px-6 rounded-full transition-all hover:scale-105">
                再来一次 <i class="fa fa-refresh ml-2"></i>
            </button>
        </div>
    </div>

    <script>
        // 获取元素
        const initialScreen = document.getElementById('initial-screen');
        const surpriseScreen = document.getElementById('surprise-screen');
        const surpriseBtn = document.getElementById('surprise-btn');
        const resetBtn = document.getElementById('reset-btn');
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        
        // 设置Canvas尺寸
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        // 烟花相关变量
        let fireworks = [];
        let particles = [];
        
        // 颜色数组
        const colors = [
            '#ff5252', '#ff4081', '#e91e63', 
            '#9c27b0', '#673ab7', '#3f51b5', 
            '#2196f3', '#03a9f4', '#00bcd4', 
            '#009688', '#4CAF50', '#8BC34A', 
            '#CDDC39', '#FFEB3B', '#FFC107', 
            '#FF9800', '#FF5722'
        ];
        
        // 烟花类
        class Firework {
            constructor() {
                this.x = canvas.width / 2;
                this.y = canvas.height;
                this.targetY = Math.random() * (canvas.height * 0.3) + 50;
                this.targetX = Math.random() * (canvas.width * 0.7) + canvas.width * 0.15;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.radius = 2;
                this.speed = 5;
                this.velocity = { x: 0, y: 0 };
                this.gravity = 0.05;
                this.reachedTarget = false;
                this.trail = [];
            }
            
            update() {
                // 记录轨迹
                this.trail.push({ x: this.x, y: this.y, alpha: 1 });
                if (this.trail.length > 20) {
                    this.trail.shift();
                }
                
                // 计算到目标的距离
                const dx = this.targetX - this.x;
                const dy = this.targetY - this.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                // 移动到目标
                if (distance > this.speed) {
                    this.velocity.x = (dx / distance) * this.speed;
                    this.velocity.y = (dy / distance) * this.speed;
                    this.x += this.velocity.x;
                    this.y += this.velocity.y;
                } else {
                    this.reachedTarget = true;
                    // 爆炸产生粒子
                    this.explode();
                }
            }
            
            explode() {
                const particleCount = Math.floor(Math.random() * 50) + 80;
                for (let i = 0; i < particleCount; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 5 + 1;
                    particles.push({
                        x: this.x,
                        y: this.y,
                        color: this.color,
                        radius: Math.random() * 2 + 1,
                        velocity: {
                            x: Math.cos(angle) * speed,
                            y: Math.sin(angle) * speed
                        },
                        gravity: 0.05,
                        friction: 0.95,
                        alpha: 1
                    });
                }
            }
            
            draw() {
                // 绘制轨迹
                this.trail.forEach((point, index) => {
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, this.radius * (index / this.trail.length), 0, Math.PI * 2);
                    ctx.fillStyle = `${this.color}${Math.floor(point.alpha * 255).toString(16).padStart(2, '0')}`;
                    ctx.fill();
                    point.alpha -= 0.05;
                });
                
                // 绘制烟花本体
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
            }
        }
        
        // 动画循环
        function animate() {
            requestAnimationFrame(animate);
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 随机发射烟花
            if (Math.random() < 0.05) {
                fireworks.push(new Firework());
            }
            
            // 更新和绘制烟花
            for (let i = fireworks.length - 1; i >= 0; i--) {
                fireworks[i].update();
                fireworks[i].draw();
                
                if (fireworks[i].reachedTarget) {
                    fireworks.splice(i, 1);
                }
            }
            
            // 更新和绘制粒子
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                
                p.velocity.y += p.gravity;
                p.velocity.x *= p.friction;
                p.velocity.y *= p.friction;
                p.x += p.velocity.x;
                p.y += p.velocity.y;
                p.alpha -= 0.01;
                
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = `${p.color}${Math.floor(p.alpha * 255).toString(16).padStart(2, '0')}`;
                ctx.fill();
                
                if (p.alpha <= 0) {
                    particles.splice(i, 1);
                }
            }
        }
        
        // 事件监听
        surpriseBtn.addEventListener('click', () => {
            initialScreen.classList.add('opacity-0', 'pointer-events-none');
            setTimeout(() => {
                initialScreen.classList.add('hidden');
                surpriseScreen.classList.remove('hidden');
                // 开始动画
                animate();
                // 定期发射烟花
                setInterval(() => {
                    if (Math.random() > 0.3) {
                        fireworks.push(new Firework());
                    }
                }, 800);
            }, 500);
        });
        
        resetBtn.addEventListener('click', () => {
            // 清空现有烟花和粒子
            fireworks = [];
            particles = [];
            // 隐藏惊喜界面，显示初始界面
            surpriseScreen.classList.add('hidden');
            initialScreen.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
        });
    </script>
</body>
</html>
